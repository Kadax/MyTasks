<div class="board" cdkDropListGroup>
  <ng-container *ngFor="let status of statuses" >
    <mat-card class="column">
      <mat-card-header>
        <mat-card-title>{{ status.label }}
          <button mat-button (click)="this.openTaskDialog()">
            <mat-icon matListIcon>add</mat-icon>
          </button>
        </mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div cdkDropList
             [cdkDropListData]="tasksByStatus.get(status.key)"
             [cdkDropListConnectedTo]="statusKeys"
             class="task-list"
             (cdkDropListDropped)="drop($event, status.key)">

          <mat-list>
            <mat-list-item lines="3" *ngFor="let task of tasksByStatus.get(status.key); let i = index"
                           cdkDrag
                           [cdkDragData]="task"
                           class="task-item">
                <span class="card-header" matListItemLine>
                  <div  class="task-row">
                    <mat-icon matListIcon>drag_indicator</mat-icon>
                    <p class="task-number">
                      #{{i+1}}.
                    </p>

                    <div class="task-title">
                      {{task.title}}
                    </div>
                  </div>
                </span>
                @if (task.description){
                  <span class="card-body" matListItemLine >
                      {{task.description}}
                  </span>
                }
                <div matListItemLine>
                  1ч 2ч
                </div>
            </mat-list-item>
          </mat-list>

        </div>
      </mat-card-content>
    </mat-card>
  </ng-container>
</div>
